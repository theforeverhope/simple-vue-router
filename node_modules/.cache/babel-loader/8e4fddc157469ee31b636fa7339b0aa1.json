{"remainingRequest":"/Users/zhongshuhua/Desktop/experiment/router/node_modules/babel-loader/lib/index.js!/Users/zhongshuhua/Desktop/experiment/router/node_modules/eslint-loader/index.js??ref--13-0!/Users/zhongshuhua/Desktop/experiment/router/src/router/index.js","dependencies":[{"path":"/Users/zhongshuhua/Desktop/experiment/router/src/router/index.js","mtime":1567427712795},{"path":"/Users/zhongshuhua/Desktop/experiment/router/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhongshuhua/Desktop/experiment/router/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhongshuhua/Desktop/experiment/router/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _classCallCheck from \"/Users/zhongshuhua/Desktop/experiment/router/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/zhongshuhua/Desktop/experiment/router/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport RouterView from \"./RouterView\";\nimport RouterLink from \"./RouterLink\";\n\nvar Router =\n/*#__PURE__*/\nfunction () {\n  function Router(options) {\n    _classCallCheck(this, Router);\n\n    this.routes = options.routes;\n  }\n\n  _createClass(Router, [{\n    key: \"getComponent\",\n    value: function getComponent(path) {\n      var route = this.routes.filter(function (route) {\n        return route.path === path;\n      })[0];\n      return route ? route.component : null;\n    }\n  }]);\n\n  return Router;\n}();\n\nexport { Router as default };\n\nRouter.install = function (Vue) {\n  Vue.mixin({\n    beforeCreate: function beforeCreate() {\n      var _this = this;\n\n      var router = this.$options.router;\n\n      if (!router) {\n        this.$myrouter = this.$root.$myrouter;\n        this.$myroute = this.$root.$myroute; // console.log(this)\n\n        return;\n      }\n\n      this.$myrouter = router;\n      var path = window.location.pathname;\n      var comp = router.getComponent(path);\n      this.$myroute = Vue.observable({\n        path: path,\n        comp: comp\n      });\n\n      this.popState = function () {\n        var comp = _this.$myrouter.getComponent(window.location.pathname);\n\n        _this.$myroute.comp = comp;\n      };\n\n      window.addEventListener('popstate', this.popState);\n    },\n    beforeDestroy: function beforeDestroy() {\n      if (this.popState) {\n        window.removeEventListener('popstate', this.popState);\n      }\n    }\n  });\n  Vue.component('router-view', RouterView);\n  Vue.component('router-link', RouterLink);\n};",{"version":3,"sources":["/Users/zhongshuhua/Desktop/experiment/router/src/router/index.js"],"names":["RouterView","RouterLink","Router","options","routes","path","route","filter","component","install","Vue","mixin","beforeCreate","router","$options","$myrouter","$root","$myroute","window","location","pathname","comp","getComponent","observable","popState","addEventListener","beforeDestroy","removeEventListener"],"mappings":";;AAAA,OAAOA,UAAP;AACA,OAAOC,UAAP;;IAEqBC,M;;;AACnB,kBAAaC,OAAb,EAAsB;AAAA;;AACpB,SAAKC,MAAL,GAAcD,OAAO,CAACC,MAAtB;AACD;;;;iCAEYC,I,EAAM;AACjB,UAAMC,KAAK,GAAG,KAAKF,MAAL,CAAYG,MAAZ,CAAmB,UAAAD,KAAK,EAAI;AACxC,eAAOA,KAAK,CAACD,IAAN,KAAeA,IAAtB;AACD,OAFa,EAEX,CAFW,CAAd;AAGA,aAAOC,KAAK,GAAGA,KAAK,CAACE,SAAT,GAAqB,IAAjC;AACD;;;;;;SAVkBN,M;;AAarBA,MAAM,CAACO,OAAP,GAAiB,UAACC,GAAD,EAAS;AACxBA,EAAAA,GAAG,CAACC,KAAJ,CAAU;AACRC,IAAAA,YADQ,0BACO;AAAA;;AACb,UAAMC,MAAM,GAAG,KAAKC,QAAL,CAAcD,MAA7B;;AAEA,UAAI,CAACA,MAAL,EAAa;AACX,aAAKE,SAAL,GAAiB,KAAKC,KAAL,CAAWD,SAA5B;AACA,aAAKE,QAAL,GAAgB,KAAKD,KAAL,CAAWC,QAA3B,CAFW,CAGX;;AACA;AACD;;AAED,WAAKF,SAAL,GAAiBF,MAAjB;AACA,UAAMR,IAAI,GAAGa,MAAM,CAACC,QAAP,CAAgBC,QAA7B;AACA,UAAMC,IAAI,GAAGR,MAAM,CAACS,YAAP,CAAoBjB,IAApB,CAAb;AACA,WAAKY,QAAL,GAAgBP,GAAG,CAACa,UAAJ,CAAe;AAC7BlB,QAAAA,IAAI,EAAJA,IAD6B;AAE7BgB,QAAAA,IAAI,EAAJA;AAF6B,OAAf,CAAhB;;AAKA,WAAKG,QAAL,GAAgB,YAAM;AACpB,YAAMH,IAAI,GAAG,KAAI,CAACN,SAAL,CAAeO,YAAf,CAA4BJ,MAAM,CAACC,QAAP,CAAgBC,QAA5C,CAAb;;AACA,QAAA,KAAI,CAACH,QAAL,CAAcI,IAAd,GAAqBA,IAArB;AACD,OAHD;;AAKAH,MAAAA,MAAM,CAACO,gBAAP,CAAwB,UAAxB,EAAoC,KAAKD,QAAzC;AACD,KAzBO;AA2BRE,IAAAA,aA3BQ,2BA2BQ;AACd,UAAI,KAAKF,QAAT,EAAmB;AACjBN,QAAAA,MAAM,CAACS,mBAAP,CAA2B,UAA3B,EAAuC,KAAKH,QAA5C;AACD;AACF;AA/BO,GAAV;AAkCAd,EAAAA,GAAG,CAACF,SAAJ,CAAc,aAAd,EAA6BR,UAA7B;AACAU,EAAAA,GAAG,CAACF,SAAJ,CAAc,aAAd,EAA6BP,UAA7B;AACD,CArCD","sourcesContent":["import RouterView from './RouterView'\nimport RouterLink from './RouterLink'\n\nexport default class Router {\n  constructor (options) {\n    this.routes = options.routes\n  }\n\n  getComponent(path) {\n    const route = this.routes.filter(route => {\n      return route.path === path\n    })[0]\n    return route ? route.component : null\n  }\n}\n\nRouter.install = (Vue) => {\n  Vue.mixin({\n    beforeCreate() {\n      const router = this.$options.router\n\n      if (!router) {\n        this.$myrouter = this.$root.$myrouter\n        this.$myroute = this.$root.$myroute\n        // console.log(this)\n        return\n      }\n      \n      this.$myrouter = router\n      const path = window.location.pathname\n      const comp = router.getComponent(path)\n      this.$myroute = Vue.observable({\n        path,\n        comp\n      })\n\n      this.popState = () => {\n        const comp = this.$myrouter.getComponent(window.location.pathname)\n        this.$myroute.comp = comp\n      }\n\n      window.addEventListener('popstate', this.popState)\n    },\n\n    beforeDestroy() {\n      if (this.popState) {\n        window.removeEventListener('popstate', this.popState)\n      }\n    }\n  })\n\n  Vue.component('router-view', RouterView)\n  Vue.component('router-link', RouterLink)\n}"]}]}